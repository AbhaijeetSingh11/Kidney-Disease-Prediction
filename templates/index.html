<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kidney Themed Object Classification</title>
  <link rel="shortcut icon" href="data:image/png;base64,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" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Fira+Mono&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    rel="stylesheet"
    crossorigin="anonymous"
  />
  <style>
    /* Base styles, colors inspired by kidney tones */
    body {
      font-family: "Inter", sans-serif;
      background: linear-gradient(
        135deg,
        #fce4e1 0%,
        #ffe6ec 50%,
        #f4d4d3 100%
      );
      margin: 0;
      padding: 1.5em 1em;
      min-height: 100vh;
      color: #4a2e31;
    }
    /* Container to center everything */
    .main.container {
      max-width: 900px;
      margin: 0 auto;
    }
    /* Top Input Section */
    .input-section {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      background: white;
      padding: 16px 20px;
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(232, 115, 117, 0.25);
      position: relative;
    }
    /* Image & Video container with kidney-red border glow */
    .image-part {
      position: relative;
      width: 280px;
      height: 280px;
      border-radius: 18px;
      overflow: hidden;
      border: 4px solid #e87375;
      box-shadow: 0 0 15px #e87375aa;
      background: #fff0f0;
      flex-shrink: 0;
    }
    /* Video and image fill container */
    #video,
    #photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 16px;
      display: block;
    }
    /* Upload button next to image */
    .upload-btn {
      flex-grow: 1;
      max-width: 160px;
      height: 48px;
      background: #e87375;
      border: none;
      color: #fff;
      font-weight: 700;
      font-size: 1.1rem;
      border-radius: 24px;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(232, 115, 117, 0.5);
      transition: background 0.3s ease, transform 0.15s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .upload-btn:hover {
      background: #bf5556;
      transform: scale(1.05);
    }
    .upload-btn:active {
      transform: scale(0.95);
    }
    /* Predict button below input section */
    .predict-btn {
      display: block;
      width: 100%;
      max-width: 320px;
      margin: 0 auto;
      padding: 14px 0;
      font-size: 1.25rem;
      font-weight: 800;
      color: #b42f2f;
      background: linear-gradient(90deg, #f54343, #bf1f1f);
      border: none;
      border-radius: 28px;
      cursor: pointer;
      box-shadow: 0 12px 28px rgba(180, 47, 47, 0.65);
      transition: filter 0.25s ease, transform 0.2s ease;
      user-select: none;
      margin-bottom: 24px;
    }
    .predict-btn:hover {
      filter: brightness(1.15);
      transform: translateY(-4px);
    }
    .predict-btn:active {
      transform: translateY(0) scale(0.95);
      filter: brightness(0.85);
    }
    /* Result section below full width */
    .output-section {
      background: white;
      border-radius: 24px;
      padding: 24px 20px;
      box-shadow: 0 18px 60px rgba(232, 115, 117, 0.3);
      max-width: 900px;
      margin: 0 auto 2em auto;
      color: #6b3a3d;
    }
    .output-section h5 {
      font-weight: 900;
      font-size: 1.6rem;
      text-align: center;
      margin-bottom: 16px;
      color: #b42f2f;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      text-shadow: 0 2px 10px #e87375aa;
    }
    /* Result containers row */
    .results-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1.2rem;
      justify-content: center;
    }
    /* Result image panel */
    .res-part2,
    .res-part {
      background: #fcebec;
      border-radius: 18px;
      box-shadow: 0 8px 38px #e86f6f44;
      padding: 16px;
      flex: 1 1 280px;
      min-height: 320px;
      overflow-y: auto;
      color: #7b4746;
      position: relative;
      border: 2.5px solid #e87375a0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      word-break: break-word;
    }
    .res-part2 img.resp-img {
      max-width: 100%;
      max-height: 300px;
      border-radius: 16px;
      box-shadow: 0 6px 22px rgba(232, 115, 117, 0.5);
      object-fit: contain;
    }
    /* JSON result text */
    .jsonRes pre {
      font-family: "Fira Mono", monospace;
      max-width: 100%;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 1rem;
      color: #8e3a3a;
      background: #fbe4e3;
      padding: 1em 1.2em;
      border-radius: 14px;
      box-shadow: 0 4px 20px rgba(232, 115, 117, 0.25);
      border: 1.8px dashed #bf4848;
      line-height: 1.5;
      margin: 0;
    }
    /* Hide video when photo shown */
    #photo:visible {
      display: block;
    }
    /* Responsive adjustments */
    @media (max-width: 720px) {
      .input-section {
        flex-direction: column;
      }
      .upload-btn {
        max-width: 100%;
        width: 100%;
      }
      .image-part {
        margin: 0 auto;
      }
      .predict-btn {
        max-width: 100%;
      }
      .results-row {
        flex-direction: column;
      }
      .res-part,
      .res-part2 {
        min-height: 240px;
      }
    }
  </style>
</head>
<body>
  <div class="main container">
    <section class="iupload">
      <!-- Top Input Section -->
      <div class="input-section">
        <div class="image-part">
          <video
            autoplay
            muted
            playsinline
            id="video"
            poster="https://img.freepik.com/free-vector/group-young-people-posing-photo_52683-18824.jpg?size=338&ext=jpg"
          ></video>
          <img src="" id="photo" alt="Captured" style="display:none;" />
          <canvas style="display:none;" id="canvas"></canvas>
        </div>
        <button id="uload" class="upload-btn" type="button">Upload</button>
      </div>
      <button id="send" class="predict-btn" type="button">Predict</button>
    </section>

    <!-- Output Section - Results -->
    <section class="output-section">
      <h5>Prediction Results</h5>
      <div class="results-row">
        <div class="res-part2"></div>
        <div class="res-part"><div class="jsonRes"></div></div>
      </div>
    </section>
  </div>

  <img class="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIkAAAAlCAMAAABBJDpuAAAAVFBMVEX/fgD/iQA7NzIyMjMnNYInNYEnNYInNYEzMzInNYQnNYETJzsnNYIwN1wxMjNoTis4O1YrNm0xOF47PE9DP0dEQEVpTVkAJJ4nNYEOLJHJbiAzMzOmmmHRAAAAFnRSTlOh/vu+986oen9fP2UqEzQkFAIDAAEEILVBJQAAA3FJREFUWMPNmO2WoyAMQG0VBARtdVRs3/89NwkgaF1rd2aOm18tIrnkgwSz7n+R7LcV1ELkeS7E7VySRlyfQXJhTiO55c+liP4cEuH1X8E7gaV+S3Jv2zYZ/Vr+/Sdx2vP6doc/fSPcf/GOpLSFVXFUW8t+giRP47TOd60yk1hbxIhSP0ACKPWrvw7YBIT/lcQY84G3Wk17ugWQfg5UsQJpjflKSLQi7xTWyk0SXTJ4VnB5D1yccxmp4Z+mX5KGNS+SPXVNll0ulyxL0wYmloBB6zL/MpCoAgjAJiUM6w0SboMwPUdRogvNKcNM3smFdRvEcJJkKcflQa+X0pNIfBGW0zKqjyQtw4VLKQlI7ZLgdrRNSZDjMQx2GB4pCkxkCrfGWUTJ0Egan6muCHgJCUwtnCk0mrJ9Q8K5LUqtdSfynkAedhynaRqngVDaXLiJEAzkFkM71IuIlWRYtSQpbXSZDvQ7JPCei9brs+oaABkn74LRIkpFaVxGnzjvIxTYREOoEwn5r01JTDRTcO87Eu3zNUeTPKZpjrIRrNIDCjzALbPk7LJMIokOEQu2K7yKQAKvFDF9pVe0R+LGb7h1MMkw2ijjA/1zhSfSphvEAChXJEhAqwYStIJWXnTpvbdH4hTUwSQ2JRmQpILDLYbB7J41SYiLcNozu5Z3JMo7RxBJahI7WSRByCMkqJt9hySESbVJcvmARJGFExJmdBSl2oM2+T4JLWfgaGFptizlPUm1FydHSdyZ7UnS4ySph2kS0kJrkvr5NJg7dnrJnfxgxPozRPGtkyPNOxtaiDvbIAF9L+5B5zTI2BwlwXmM+U3zReav3o0F8oUEFFZ42McDZYomOUziFmezgWyo251Uc1nyKJol7URCEvIYUEbHYaEGQi9C9egwCdVfHwiaajfjKMUcHcRacCylhWJbJDfq47EEDhYqoIWjHnwDXZPpPiChPQelLU+Cbm4w50FmYgkvFwpiWwCC/Um/SLcNElOC9RVj6qWpCiEMvRUK4zLpdKmPw8rVldy/qxjn60wLrVLWJIPLiZJRr3fsvnOHPvare+lB93tb37T20D82jqOt+zNuXhuNvNhp7X+PpHb3rvV9R5xjE2SpyCN9ffQO+GtWIZr5Xnytz4gTMIRYfys47/uJEXny/aQ/95tSUwmU+uRvSp/IHzQqZYpYrQmxAAAAAElFTkSuQmCC" />

  <div id="loading" style="display:none;">
    <div
      class="loader"
      style="
        border: 12px solid #fce8e7;
        border-top: 12px solid #e87375;
        border-bottom: 12px solid #bf3a3b;
        border-radius: 50%;
        width: 78px;
        height: 78px;
        animation: spin 1.2s linear infinite;
        margin: auto;
        box-shadow: 0 2px 24px #e8636350;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000001;
      "
    ></div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    crossorigin="anonymous"
  ></script>

  <script>
    // Keep your original script untouched
    var mybtn = document.getElementById("startbtn");
    var myvideo = document.getElementById("video");
    var mycanvas = document.getElementById("canvas");
    var myphoto = document.getElementById("photo");
    var base_data = "";

    function sendRequest(base64Data) {
      var type = "json";
      if (base64Data != "" || base64Data != null) {
        if (type == "imgtobase") {
          $(".res-part").html("");
          $(".res-part").html(base64Data);
        } else if (type == "basetoimg") {
          var imageData = $("#imgstring").val();
          $(".res-part").html("");
          $(".res-part").append(
            "<img src='data:image/jpeg;base64," +
              imageData +
              "' alt='' />"
          );
        } else {
          var url = $("#url").val();
          $("#loading").show();
          $.ajax({
            url: url,
            type: "post",
            cache: false,
            async: true,
            crossDomain: true,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
            },
            data: JSON.stringify({ image: base64Data }),
            success: function (res) {
              $(".res-part").html("");
              $(".res-part2").html("");
              try {
                var imageData = res[1].image;
                if (imageData.length > 100) {
                  if (imageData.length > 10)
                    $(".res-part2").append(
                      "<img class='resp-img' src='data:image/jpeg;base64," +
                        imageData +
                        "' alt='' />"
                    );
                }
              } catch (e) {}
              $(".res-part").html(
                "<pre>" + JSON.stringify(res[0], undefined, 2) + "</pre>"
              );
              $("#loading").hide();
            },
          });
        }
      }
    }

    $(document).ready(function () {
      $("#loading").hide();

      $("#send").click(function (evt) {
        sendRequest(base_data);
      });

      $("#uload").click(function (evt) {
        $("#fileinput").focus().trigger("click");
      });
      $("#fileinput").change(function () {
        if (this.files && this.files[0]) {
          var reader = new FileReader();
          reader.onload = function (e) {
            var url = e.target.result;
            var img = new Image();
            img.crossOrigin = "Anonymous";
            img.onload = function () {
              var canvas = document.createElement("CANVAS");
              var ctx = canvas.getContext("2d");
              canvas.height = this.height;
              canvas.width = this.width;
              ctx.drawImage(this, 0, 0);
              base_data = canvas
                .toDataURL("image/jpeg", 1.0)
                .replace(/^data:image.+;base64,/, "");
              canvas = null;
            };
            img.src = url;
            $("#photo").attr("src", url);
            $("#photo").show();
            $("#video").hide();
          };
          reader.readAsDataURL(this.files[0]);
        }
      });
    });

    // Loader spin animation
    const styleElem = document.createElement("style");
    styleElem.innerHTML = `
      @keyframes spin {
        0% { transform:rotate(0deg); }
        100% { transform:rotate(360deg); }
      }
    `;
    document.head.appendChild(styleElem);
  </script>

  <!-- Hidden input for url -->
  <input type="hidden" id="url" value="../predict" />
  <input
    type="file"
    id="fileinput"
    name="upload"
    style="position: absolute; top: -1000px"
  />
</body>
</html>
